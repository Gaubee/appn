import{a as E,u as O,c as P}from"./index-lqWRYX0p-AhKfckNa.js";import{m as R,a as $}from"./promise-with-resolvers.polyfill-DmWLZHIp-CJy6J3Rc.js";const v=(s,t,e=s)=>new Proxy(e,{get(n,r){return r in n?n[r]:n[r]=t(n,r)}}),A=(s,t)=>{{const e=Object.getOwnPropertyDescriptors(s),n=[];for(const r in e)e[r].enumerable&&n.push(r);return n}},D=new WeakMap,b=(s=document)=>{let t=!1;const e=()=>{t||(t=!0,queueMicrotask(()=>{t=!1,s.adoptedStyleSheets=s.adoptedStyleSheets}))},n=l=>(...o)=>{const u=s.adoptedStyleSheets[l].apply(s.adoptedStyleSheets,o);return e(),u},r=n("push"),i=n("pop"),a=n("shift"),h=n("unshift"),_=n("splice"),p=l=>{const o=s.adoptedStyleSheets.indexOf(l);o!==-1&&(s.adoptedStyleSheets.splice(o,1),e())},y=E(()=>R(D,s.adoptedStyleSheets,()=>new Map)),k=l=>y().has(l),M=(l,o)=>{const u=y(),w=u.get(l);w!==o&&(g(w,o),u.set(l,o))},T=l=>{const o=y(),u=$(o,l);return u!=null?(p(u),!0):!1},z=l=>y().get(l),C=(l,o)=>{const u=s.adoptedStyleSheets.includes(l);o===!1?u&&p(l):o?u||(s.adoptedStyleSheets.push(l),e()):u?p(l):(s.adoptedStyleSheets.push(l),e())},g=(l,o)=>{if(l==null)s.adoptedStyleSheets.push(o),e();else{const u=s.adoptedStyleSheets.indexOf(l);u!==-1&&(s.adoptedStyleSheets.splice(u,1,o),e())}},N=new Map([["push",r],["pop",i],["shift",a],["unshift",h],["splice",_],["remove",p],["toggle",C],["replace",g],["has",k],["set",M],["delete",T],["get",z]]);return new Proxy(s.adoptedStyleSheets,{get(l,o,u){return N.get(o)||Reflect.get(l,o,u)}})},L=b(),q=s=>{let t="";for(const e of A(s)){const n=e.startsWith("--")?e:e.replace(/[A-Z]/g,r=>"-"+r.toLowerCase());t+=`${n}:${s[e]};`}return t},j=s=>s?s.nodeType!==Node.DOCUMENT_NODE?s.ownerDocument??document:s:document,x=new WeakMap,Y=s=>("adoptedStyleSheets"in s||(s=j(s)),R(x,s,b)),Z="ontouchstart"in document.body&&typeof TouchEvent<"u";class F{#e;#s=!1;#l(t=!this.#s){const e=this.#e;e!=null&&(t?this.#s||(e.push(this.#n),this.#s=!0):this.#s&&(e.remove(this.#n),this.#s=!1))}constructor(t=L){this.#e=t,this.#l()}get owner(){return this.#e}set owner(t){t!==this.#e&&(this.#l(!1),this.#e=t??null,this.#l(!0))}#n=new CSSStyleSheet;get unsafeStyleSheet(){return this.#n}#t=[];get size(){return this.#t.length}addRule(t,e){const n=this.#n,r=this.#t,i=n.cssRules.length;if(n.insertRule(t,e??i),i!==n.cssRules.length){const a=n.cssRules.item(e??i);return e==null?r.push(a):e===0?r.unshift(a):r.splice(e,0,a),a}return null}addRules(t,e){m.replaceSync(t);const n=[];for(let r=m.cssRules.length-1;r>=0;r--)n[n.length]=this.addRule(m.cssRules[r].cssText,e);return e==null?n:n.reverse()}removeRule(t){let e;if(typeof t=="number"){if(this.#t[e=t]==null)return!1}else if(e=this.#t.indexOf(t),e===-1)return!1;return this.#n.deleteRule(e),this.#t.splice(e,1),!0}atRule(t){return this.#t.at(t)}[Symbol.iterator](){return this.#t[Symbol.iterator]()}#r=new Map;keys(){return this.#r.keys()}hasRule(t){return this.#r.has(t)}getRule(t){return this.#r.get(t)}setRule(t,e,n){this.deleteRule(t);const r=this.addRule(e,n);return r&&this.#r.set(t,r),r}deleteRule(t){const e=this.#r.get(t);return e!=null?(this.removeRule(e),!0):!1}}const m=new CSSStyleSheet,d=s=>Symbol.iterator in s?s:{[Symbol.iterator](){return s}},c=s=>t=>W(t,s),W=(s,t)=>{const e=Set.prototype[s];if(typeof e=="function")return O(e);const n=P(t);return Object.defineProperty(Set.prototype,s,{value:n,writable:!0,enumerable:!1,configurable:!0}),t};c((s,t)=>{f(t);const e=new Set(s);for(const n of d(t.keys()))e.add(n);return e})("union");const J=c((s,t)=>{f(t);let e,n;s.size<=t.size?(e=s,n=t):(e=t.keys(),n=s);const r=new Set;for(const i of d(e))n.has(i)&&r.add(i);return r})("intersection");c((s,t)=>{f(t);const e=new Set(s);if(s.size<=t.size)for(const n of s)t.has(n)&&e.delete(n);else for(const n of d(t.keys()))e.has(n)&&e.delete(n);return e})("difference");c((s,t)=>{f(t);const e=new Set(s);for(const n of d(t.keys()))s.has(n)?e.delete(n):e.add(n);return e})("symmetricDifference");c((s,t)=>{f(t);for(const e of s)if(!t.has(e))return!1;return!0})("isSubsetOf");c((s,t)=>{f(t);for(const e of d(t.keys()))if(!s.has(e))return!1;return!0})("isSupersetOf");c((s,t)=>{if(f(t),s.size<=t.size){for(const e of s)if(t.has(e))return!1}else for(const e of d(t.keys()))if(s.has(e))return!1;return!0})("isDisjointFrom");function f(s){if(!I(s))throw new TypeError;const t=s.size,e=Number(t);if(Number.isNaN(e))throw new TypeError;if(typeof s.has!="function")throw new TypeError;if(typeof s.keys!="function")throw new TypeError}function I(s){if(s===null)return!1;const t=typeof s;return t==="object"||t==="function"}const K={set(s,t){s.dataset.sharedElementLifecycle=t},get(s){return s.dataset.sharedElementLifecycle},delete(s){delete s.dataset.sharedElementLifecycle}},S=[{key:"group",alias:null,prop:"sharedElementGroupStyle"},{key:"new",alias:"both",prop:"sharedElementNewStyle"},{key:"old",alias:"both",prop:"sharedElementOldStyle"},{key:"imagePair",alias:null,prop:"sharedElementImagePairStyle"}],B=new Map(S.map(s=>[s.key,s.prop]));class G{set(t,e=null,n){if(e==null)return this.unset(t);const{dataset:r}=t;r.sharedElement=e;for(const i of S){const a=n?n[i.key]||i.alias&&n[i.alias]:null;a?r[i.prop]=a:delete r[i.prop]}}get(t){const{dataset:e}=t,n=e.sharedElement;if(n){let r;return{name:n,get styles(){return r??=v({},(i,a)=>{const h=B.get(a);return h?e[h]??"":""})}}}}unset(t){const{dataset:e}=t;if(e.sharedElement){delete e.sharedElement;for(const n of S)delete e[n.prop]}}queryAll(t,e){let n=[].slice.call(t.querySelectorAll(e?.selector??"[data-shared-element]"));return e?.filter&&(n=n.filter(e.filter)),n}queryAllWithConfig(t,e){const n=this.queryAll(t,e),r=[];for(const i of n){const a=this.get(i);r.push(Object.assign(a,{element:i}))}return r}}const Q=new G;class V{selectorPrefix="::view-transition";getSelector(t="group",e="*"){return`${this.selectorPrefix}-${t}(${e})`}setAnimationStyle(t=this.getSelector(),e=null){const n=`--user-${t}`;e==null?this.css.deleteRule(n):this.css.setRule(n,`${t}{${q(e)}}`)}animationDuration=350;animationEasing="cubic-bezier(0.2, 0.9, 0.5, 1)";#e=E(()=>{const t=String.raw,e=new F;return e.addRule(t`[data-shared-element-state=old]{visibility:hidden!important}`),e.addRule(t`${this.getSelector("group","*")}{animation-timing-function:${this.animationEasing};animation-duration:${this.animationDuration}ms}`),e});get css(){return this.#e()}__getPagesContext(t,e){const n={},r=i=>{if(i){const a=e.queryNavEntryNode(i,t);if(a)return{navEntryNode:a,navEntry:i}}};return n.from=r(e.from),n.dest=r(e.dest),n}}export{V as S,K as a,J as b,q as c,Y as g,Z as i,A as o,Q as s};

import{a as f,e as u,s as l}from"./safe-property-CGUTARmz-093nuPSx.js";import{m as y}from"./promise-with-resolvers.polyfill-DmWLZHIp-BuQ_xy-h.js";const a=new WeakMap,m=(s,p={})=>f((o,r)=>{const t=d(s,p)(o,r);if(t)return l({setProperty:t.set,getProperty:t.get,fromAttribute(e){if(e!=null){const n=Function("event",e);this.addEventListener(t.eventType,n)}return r.access.get(this)},toAttribute:!1})(o,r)}),d=(s,p={})=>u()((o,r)=>{if(r.name in o&&!p.override)return;if(!s){const e=r.name,n=typeof e=="symbol"?e.description:e;if(typeof n!="string"||n.startsWith("on")===!1)throw new Error(`eventName is required for property ${String(e)}`);s=n.slice(2)}const t=s;return{eventType:t,get(){return a.get(this)?.get(t)?.handleEvent??null},set(e){const n=y(a,this,()=>new Map),i=n.get(t);if(typeof e=="function"||typeof e=="object"&&e!==null)if(i)i.handleEvent=e;else{const c={handleEvent:e};this.addEventListener(t,c),n.set(t,c)}else i&&(this.removeEventListener(t,i),n.delete(t)),e=null;return e}}});export{d as a,m as e};
